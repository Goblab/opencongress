<%= content_for :stylesheets do %>
<style>
    .bootstrap-enabled strong { font-weight: 500; }

    #content {
        font-family: "franklin-gothic-urw", sans-serif;
        font-weight: 400;
    }

    .two-up { width: 450px; height: 90px; box-sizing: border-box; -moz-box-sizing:border-box; float: left; }

    #hero {
        height: 435px;
        background: #c4d9df;
        color: #fff;
    }

    #hero h1 {
        float: none;
        width: 800px;
        margin: 60px auto 40px;
        font-weight: 300;
        font-style: normal;
        font-size: 30px;
        line-height: 120%;
    }

    .bootstrap-enabled .form-search .input-append .search-query{
        width: 450px;
        height: 25px;
        padding: 10px 20px;
        margin-left: -16px;
        border: 1px solid #ddd;
        border-radius: 25PX;
        font-family: "franklin-gothic-urw";
        font-style: italic;
        font-size: 18px;
        margin-left: -16px;
    }

    .bootstrap-enabled .form-search .input-append .search-query::-webkit-input-placeholder { color: #ccc; }
    .bootstrap-enabled .form-search .input-append .search-query:-moz-placeholder { color: #ccc; }
    .bootstrap-enabled .form-search .input-append .search-query::-moz-placeholder { color: #ccc; }
    .bootstrap-enabled .form-search .input-append .search-query:-ms-input-placeholder { color: #ccc; }
    .bootstrap-enabled .form-search .input-append .search-query::input-placeholder { color: #ccc; }

    #hero button.search {
        position: relative;
        width: 24px;
        height: 24px;
        margin-left: -40px;
        border: 0;
        border-top: 0;
        border-bottom: 0;
        background: none;
        background-image: url('../images/icon-search.png');
        -webkit-box-shadow: none;
        box-shadow: none;
        outline: 0;
        z-index: 10;
        opacity: 0.7;
    }

    #hero button.search:hover, #hero button.search:active { opacity: 1; }
    p.featured {
        margin-top: 15px;
        font-size: 14px;
    }

    .featured a { text-decoration: underline; }

    #in_session {
        width: 475px;
        height: 50px;
        margin: 50px auto;
        border: 1px solid rgba(255,255,255, .4);
        font-weight: 300;
        font-size: 15px;
    }

    h4.inset {
        width: 220px;
        margin: -10px auto 10px;
        background: #c4d9df;
        font-weight: 300;
        text-transform: uppercase;
        font-size: 16px;
    }

    ul.status-lights { margin: 0; }

    ul.status-lights li {
        display: inline;
        color: #666;
    }

    ul.status-lights li:first-child{ margin-right: 20px; }
    ul.status-lights li:before {
        content: "";
        display: inline-block;
        position: relative;
        top: 2px;
        width: 10px;
        height: 10px;
        margin-right: 8px;
        border: 2px solid #fff;
        border-radius: 10px;
       -moz-box-shadow: inset 0px 2px 0px rgba(0,0,0,.25);
       -webkit-box-shadow: inset 0px 2px 0px rgba(0,0,0,.25);
       box-shadow: inset 0px 2px 0px rgba(0,0,0,.25);
    }

    ul.status-lights li.on:before { background: #afe075; }
    ul.status-lights li.off:before { background: #d05b5b; }

    #belt {
        position: relative;
        background: #72919d;
    }

    #belt h2 {
        font-weight: 400;
        font-style: normal;
        font-size: 24px;
    }

    .bootstrap-enabled .span4.announcement {
        position: absolute;
        top: -17px;
        left: -10px;
        width: 330px;
        height: 280px;
        padding: 20px 30px;
        background: #efc20d;
        font-weight: 300;
        font-size: 14px;
        line-height: 150%;
        color: #555;
    }

    .bootstrap-enabled .span4.announcement:before {
        content: '';
        position: absolute;
        top: 8px;
        left: 8px;
        width: 312px;
        height: 262px;
        border: 1px dotted #fbdc5f;
    }

    .announcement h2 {
        padding-bottom: 10px;
        margin-bottom: 10px;
        border-bottom: 4px double rgba(255,255,255, .5);
        line-height: 120%;
        color: #fff;
    }

    a.more{
        background: none;
        font-weight: 300;
        font-size: 16px;
        color: #fff;
        text-decoration: underline;
    }

    .bootstrap-enabled .span8.call-to-action {
        position: relative;
        height: 237px;
        padding: 30px 0 0 40px;
    }
    .bootstrap-enabled .span8.call-to-action:before {
        content: '';
        position: absolute;
        top: -4px;
        left: -27px;
        width: 681px;
        height: 230px;
        border: 2px solid #82a0af;
        border-left: 0;
        border-right: 0;
    }
    .bootstrap-enabled .span8.call-to-action h2 {
        color: #cee7ff;
    }

    .bootstrap-enabled .span8.call-to-action p {
        display: inline-block;
        width: 325px;
        font-weight: 300;
        font-size: 18px;
        line-height: 120%;
        color: #fff;
    }

    #signup-btn {
        position: relative;
        top: -30px;
        left: 15px;
        width: 200px;
        height: 52px;
        padding: 0;
        border: 0;
        border-bottom: 3px solid #447cac;
        background: #50a4ed;
        font-size: 20px;
        line-height: 52px;
        color: #fff;
        text-shadow: 0 -1px rgba(0,0,0,.25);
    }
    #signup-btn:before {
        content: '';
        position: absolute;
        top: 4px;
        left: 4px;
        width: 190px;
        height: 43px;
        border: 1px solid rgba(255,255,255,.15);
        border-radius: 2px;
    }
    #superlatives {
        padding-top: 20px;
        background: #edf4f6;
    }
    #superlatives h3 {
        margin-top: 50px;
        font-weight: 400;
        font-size: 20px;
        text-align: center;
        text-shadow: 0px 1px #fff;
        color: #666;
        display: block;
        margin: 50px auto 0;
    }

    #superlatives h3.recent-activity { width: 410px;}
    #superlatives h3.most-viewed { width: 375px;}

    #superlatives h3:after {
        content: '';
        position: absolute;
        left: 0;
        width: 925px;
        height: 1px;
        border: 1px solid #999;
    }

    #superlatives h4 {
        font-weight: 400;
        font-size: 16px;
        color: #448ccb;
    }
    #superlatives option {
        text-transform: none;
    }
    .superlative {
        padding: 5px 20px;
        background: #fff;
        margin: 20px 0 20px 20px;        
    }

    #content_footer {
        height: 190px;
        background: #cedcdf;
    }

    .icbiaselect-display {
        width: 210px;
        border: 1px solid #ccc;
        padding-left: 8px;
        border-radius: 3px;
        margin-left: 4px;
        line-height: 32px;
        display: inline-block;
        text-align: left;
        background: #fff;
        position: relative;
        color: #666;
    }
    .icbiaselect-display:after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 30px;
        height: 32px;
        background: #d6effe url('../images/icon-dropdown.png') 8px 13px no-repeat;
        border-radius: 3px;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }
    #updated {
        display: block;
        margin: auto;
    }
    #updated p {
        text-align: center;
        color: #aaa;
    }
    #updated p:before { content: "\2014  ";}
    #updated p:after { content: " \2014";}

</style>
<% end %>
<%= content_for :javascripts do %>
<%= javascript_include_tag 'jquery.icbiacontrol.js' %>
<script>
(function($){
    $(function(){
        $('#superlatives select').icbiaControl();
        $('select.ajax-load').change(function(){
            var trigger = $(this),
                target = $(trigger.attr('data-target'));
            target.addClass('loading').load(trigger.prop('value'), function(){target.removeClass('loading')});
        });
        // get local reps
        $.getJSON('/index/localized_search_placeholder.json', function(data){
            if(data.legislators.length){
                var target = $('#main_search'),
                    items = [],
                    old_placeholder = target.attr('placeholder'),
                    new_placeholder = '',
                    rand_btw = function(low, high){
                        return Math.min(high, Math.max(low, Math.random()* ((low + high) / 2) ));
                    }
                    recursive_type = function(el, attr, dest, cb){
                        var current = $(el).attr(attr),
                            next;
                        if(current == dest){
                            if(cb){
                                return cb();
                            }
                            return;
                        }
                        next = current.length > dest.length ? current.slice(0, current.length-1) : dest.slice(0, current.length+1);
                        $(el).attr(attr, next);
                        setTimeout(function(){ recursive_type(el, attr, dest, cb) }, rand_btw(50, 200));
                    }
                $(data.legislators).each(function(i, leg){
                    items.push(leg.firstname + ' ' + leg.lastname);
                });
                new_placeholder = items.join(', ');
                if(new_placeholder.length){
                    recursive_type(target, 'placeholder', '', function(){
                        recursive_type(target, 'placeholder', new_placeholder);
                    });
                }
            }
        });
    });
})(jQuery)
</script>
<% end %>

<div id="content" class="bootstrap-enabled">
    <div id="hero" class="container-fluid">
        <div class="row-fluid">
            <div class="span12 centered">
                <h1>Enter a lawmaker&rsquo;s name, issue area or bill number to search OpenCongress. Discover who represents you, find relevant legislation and learn how to take action.</h1>
                <form class="form-search" action="#" method="post">
                    <div class="input-append">
                        <input class="search-query" id="main_search" type="text" placeholder="<%= @popular_legislators.first.full_name %>, <%= @popular_bills.first.typenumber %>">
                        <button class="search"></button>
                    </div>
                    <p class="featured">
                        Popular Searches:
                        <% @searches.each do |search| %>
                            <%= link_to search.text, "/search/result?q=#{search.text}" %>
                        <% end %>
                    </p>
                </form>

                <div id="in_session">
                    <h4 class="inset">Today in Congress</h4>
                    <small><%= @updated_at.to_s(:month_day) %></small>
                    <ul class="status-lights">
                        <%= session_li('house', @sessions[:house_session]) %>
                        <%= session_li('senate', @sessions[:senate_session])%>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="belt" class="container-fluid">
        <div class="row-fluid">
            <div class="span4 announcement">
                <h2>Hello! From the<br> Sunlight Foundation</h2>
                <p>The Sunlight Foundation is now the sole operator of OpenCongress. This site will continue to be a comprehensive, nonpartisan source for what's happening in the United States Congress.</p>
                <a class="more" href="http://sunlightfoundation.com/about">Learn more about Sunlight</a>
            </div>
            <div class="span8 pull-right call-to-action">
                <h2>Track Bills, Follow Lawmakers and More</h2>
                <p>Create an OpenCongress account to get updates on lawmaking activity, bills and votes, and connect with other users on issues you care about.</p>
                <div id="signup-btn" class="btn huge primary">Sign Up Now</div>
            </div>
        </div>
    </div>
    <div id="superlatives">
        <div class="container-fluid">
            <!-- Recent Activity -->
            <div class="row-fluid">
                <div class="span12">
                    <h3>Recent Activity in <select class="ajax-load" data-target="#superlatives_recent">
                            <option value="/index/hp_recent?type=bills">Bills</option>
                            <option value="/index/hp_recent?type=votes" selected>Votes</option>
                        </select>
                    </h3>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12" id="superlatives_recent">
                <%= render :partial => "index/superlatives/vote", :collection => @recent_votes, :as => :vote, :locals => { :superlative => :recent } %>
                </div>
            </div>
            <!-- Most Viewed -->
            <div class="row-fluid">
                <div class="span12">
                    <h3>Most Viewed <select class="ajax-load" data-target="#superlatives_popular">
                            <option value="/index/hp_popular?type=bills">Bills</option>
                            <option value="/index/hp_popular?type=votes">Votes</option>
                            <option value="/index/hp_popular?type=issues">Issues</option>
                            <option value="/index/hp_popular?type=senators">Senators</option>
                            <option value="/index/hp_popular?type=representatives">Representatives</option>
                        </select>
                    </h3>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12" id="superlatives_popular">
                <%= render :partial => "index/superlatives/bill", :collection => @popular_bills, :as => :bill, :locals => { :superlative => :popular } %>
                </div>
            </div>
        </div>
    </div>
    <div id="content_footer" class="container-fluid">
        <div class="row-fluid">
            <div class="span7">
                <h2>Download the Congress App</h2>
                <p>Download Sunlight's Congress app for <a href="">Android</a> and <a href="">iOS</a> devices to learn more about your elected representatives, get in touch with them and see what they're up to. Follow the latest conressional bills, see floor activity and explore votes from the palm of your hand.</p>
            </div>
            <div class="span5">
                <a href="" class="phones"><img src="" alt="Screenshots of Congress apps for Android and iOS"></a>
            </div>
        </div>
    </div>
</div>